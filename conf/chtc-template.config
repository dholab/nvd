// NVD user configuration for CHTC O'Connor Lab
// Generated by: nvd setup
// Hostname: ${HOSTNAME}
// User: ${USER}
// Date: ${DATE}

profiles {

    chtc_htc {
        process.executor = "ospool"
        process.disk = 500.GB
        process.clusterOptions = """
        requirements = (OpSysMajorVer == 8) || (OpSysMajorVer == 9) && (Target.HasCHTCStaging == true)
        +AccountingGroup = "Pathology_OConnor"
        container_image = ${HOME}/.nvd/nvd-v${VERSION}.sif
        transfer_output_files = ""
        """
        executor {
            '$ospool' {
                sharedFilesystem = false
                submitFileDir = '.nextflow/condor'
                pathMappings = ['/mnt/htc-cephfs/fuse/root/staging': '/staging']
            }
        }
    }

}

process {
    withName: 'CHECK_RUN_STATE' {
        executor = 'local'
    }
    withName: 'REGISTER_HITS' {
        executor = 'local'
    }
    withName: 'COMPLETE_RUN' {
        executor = 'local'
    }
}

plugins {
    id 'nf-ospool@0.1.0'
}
